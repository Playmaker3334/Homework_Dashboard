<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Real-Time Crypto-Style Chart</title>

	<!-- ── AESTHETIC DARK-MODE STYLE ──────────────────────────── -->
	<style>
		:root {
			--bg: #0e0e11;
			--panel: #1a1a1f;
			--text: #e6e6e9;
			--accent: #9b5de5; /* purple line */
			--grid: rgba(255,255,255,0.07);
			--font: "Inter", system-ui, sans-serif;
		}
		@media (prefers-color-scheme: light) {
			:root { --bg: #fafafa; --panel: #ffffff; --text: #1a1a1f; --grid: rgba(0,0,0,0.08); }
		}

		* { box-sizing: border-box; margin: 0; padding: 0; }
		html,body { height: 100%; }
		body {
			display: flex;
			align-items: center;
			justify-content: center;
			background: var(--bg);
			color: var(--text);
			font-family: var(--font);
		}

		#chart-wrapper {
			width: 95%;
			max-width: 1000px;
			background: var(--panel);
			padding: 1.5rem;
			border-radius: 16px;
			box-shadow: 0 0 40px rgba(0,0,0,.4);
		}

		canvas { width: 100% !important; height: 60vh !important; }
	</style>
</head>
<body>
	<div id="chart-wrapper">
		<canvas id="rt-chart"></canvas>
	</div>

	<!-- ── CHART.JS CDN ───────────────────────────────────────── -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

	<!-- ── REAL-TIME LOGIC ─────────────────────────────────────── -->
	<script>
	// ---------- Config helpers ----------
	const POINTS_LIMIT = 120;          // keep last N points (~2 min @1s)
	const INTERVAL_MS  = 1000;         // update every second
	const START_PRICE  = 1000;         // initial dummy price

	// Generate a nicely fluctuating price series using a random walk
	let current = START_PRICE;
	function nextPrice() {
		const changePct = (Math.random() - 0.5) * 0.6;  // ±0.30 %
		current = +(current * (1 + changePct / 100)).toFixed(2);
		return current;
	}

	function nowLabel() {
		return new Date().toLocaleTimeString('en-GB'); // HH:MM:SS
	}

	// ---------- Chart.js setup ----------
	const ctx = document.getElementById('rt-chart').getContext('2d');
	const data = {
		labels: [],
		datasets: [{
			label: 'Simulated Price',
			data: [],
			borderColor: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim(),
			backgroundColor: 'rgba(0,0,0,0)',
			borderWidth: 2,
			pointRadius: 0,
			tension: 0.35
		}]
	};

	const chart = new Chart(ctx, {
		type: 'line',
		data,
		options: {
			scales: {
				x: { grid: { color: getComputedStyle(document.documentElement).getPropertyValue('--grid') } },
				y: { grid: { color: getComputedStyle(document.documentElement).getPropertyValue('--grid') } }
			},
			animation: { duration: 0 },
			plugins: {
				legend: { display: false },
				tooltip: {
					mode: 'index',
					intersect: false,
					backgroundColor: 'rgba(30,30,35,.9)',
					borderColor: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim(),
					borderWidth: 1
				}
			},
			responsive: true,
			maintainAspectRatio: false
		}
	});

	// ---------- Real-time update loop ----------
	function addPoint() {
		data.labels.push(nowLabel());
		data.datasets[0].data.push(nextPrice());

		// keep series length bounded
		if (data.labels.length > POINTS_LIMIT) {
			data.labels.shift();
			data.datasets[0].data.shift();
		}
		chart.update();
	}

	// Seed initial data (30 s history)
	Array.from({length:30}).forEach(addPoint);

	// Start live updates
	setInterval(addPoint, INTERVAL_MS);
	</script>
</body>
</html>

